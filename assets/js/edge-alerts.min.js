/*	Edge Alerts v1.1, Copyright 2014, Joe Mottershaw, https://github.com/joemottershaw/
//	=================================================================================== */

!function(e,t){function o(t,o){$this=this,this.element=t,this.$element=e(this.element),this.options=e.extend({},i,o),this._defaults=i,this._name=n,$edgeAlerts=e("<div>",{"class":"edge-alerts-overlay"}),$close=e("<div>",{"class":"edge-alerts-close"}),$container=e("<div>",{"class":"edge-alerts-container"}),$popupHead=e("<div>",{"class":"edge-alerts-popup-head"}),$popupBody=e("<div>",{"class":"edge-alerts-popup-body"}),$popupMessage=e("<div>",{"class":"edge-alerts-popup-message"}),$popupButtons=e("<div>",{"class":"edge-alerts-popup-buttons"}),$popupCancel=e('<button class="edge-alerts-popup-cancel">'+this.options.cancelText+"</div>"),$popupContinue=e('<button class="edge-alerts-popup-continue">'+this.options.continueText+"</div>"),$error=e('<div class="edge-alerts-error">'+this.options.errorMessage+"</div>"),keyEnter=13,keyEsc=27,this.init()}function s(){return t.innerHeight?t.innerHeight:e(t).height()}var n="edgeAlerts",i={type:"alert",title:null,message:null,cancelText:"Cancel",continueText:"Continue",reverseButtons:!1,revealSpeed:400,background:"rgba(0, 0, 0, .8)",overlayClose:!0,closeButton:!0,enterKey:!0,escKey:!0,callbackInit:function(){},callbackBeforeOpen:function(){},callbackAfterOpen:function(){},callbackConfirm:function(){},callbackBeforeClose:function(){},callbackAfterClose:function(){},callbackError:function(){},errorMessage:"It appears there was an error with the requested dialog popup."};o.prototype={init:function(){this.$element.on("click",function(t){t.preventDefault(),e(":focus").blur(),$this.openEdgeAlerts()}),$this.options.overlayClose&&$edgeAlerts.on("click",function(t){(t.target===this||e(t.target).hasClass("edge-alerts-container")||e(t.target).hasClass("edge-alerts-error"))&&$this.closeEdgeAlerts()}),$close.on("click",function(){$this.closeEdgeAlerts()}),$popupCancel.on("click",function(){$this.closeEdgeAlerts()}),$popupContinue.on("click",function(){$this.closeEdgeAlerts(),"confirm"==$this.options.type&&$this.options.callbackConfirm.call(this)}),e("body").off("keyup").on("keyup",function(e){$this.options.escKey&&e.keyCode===keyEsc&&$this.closeEdgeAlerts(),$this.options.enterKey&&e.keyCode===keyEnter&&$popupContinue.trigger("click")}),this.options.callbackInit.call(this)},openEdgeAlerts:function(){this.options.callbackBeforeOpen.call(this),$this.buildEdgeAlerts(),$this.adjustContent(),e(t).on("resize",function(){$this.adjustContent()}),this.options.callbackAfterOpen.call(this)},buildEdgeAlerts:function(){0===e(".edge-alerts-overlay").size()&&(e("body").prepend($edgeAlerts.css({"background-color":this.options.background})),$edgeAlerts.append($close,$container),("alert"==this.options.type||"confirm"==this.options.type)&&$container.append($popupHead.append(this.options.title),$popupBody.append($popupMessage.append(this.options.message),$popupButtons)),"alert"==this.options.type?$popupButtons.append($popupContinue):"confirm"==this.options.type?this.options.reverseButtons?$popupButtons.append($popupContinue,$popupCancel):$popupButtons.append($popupCancel,$popupContinue):$this.edgeAlertsError(),$edgeAlerts.fadeIn(this.options.revealSpeed))},adjustContent:function(){$edgeAlerts.css({height:s()}),$container.css({"margin-top":"-"+$container.height()/2+"px","margin-left":"-"+$container.width()/2+"px"})},closeEdgeAlerts:function(){this.options.callbackBeforeClose.call(this),$edgeAlerts.fadeOut(this.options.revealSpeed,function(){e(this).remove()}),this.options.callbackAfterClose.call(this)},edgeAlertsError:function(){this.options.callbackError.call(this),$container.append($error)}},e.fn[n]=function(t){e.data(this,n)||e.data(this,n,new o(this,t))}}(jQuery,window,document);